{% extends "base.html" %}
{% block title %}{{ table_name }} - AbaQuiz Admin{% endblock %}
{% block content %}
<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="mb-4">
    <ol class="flex items-center gap-2 text-sm">
        <li><a href="/" class="text-text-muted hover:text-text-primary transition-colors">Home</a></li>
        <li class="text-text-disabled">/</li>
        <li><a href="/tables" class="text-text-muted hover:text-text-primary transition-colors">Tables</a></li>
        <li class="text-text-disabled">/</li>
        <li class="text-text-primary font-medium">{{ table_name }}</li>
    </ol>
</nav>

<div class="flex items-baseline gap-4 mb-6">
    <h1 class="text-2xl font-semibold tracking-tight text-text-primary">{{ table_name }}</h1>
    <span class="text-sm text-text-muted">{{ total }} records</span>
</div>

<!-- Search -->
<div class="mb-6" x-data="{ search: '{{ search }}' }">
    <input type="search"
           name="search"
           class="input max-w-md"
           placeholder="Search..."
           x-model="search"
           hx-get="/tables/{{ table_name }}/rows"
           hx-trigger="keyup changed delay:300ms"
           hx-target="#table-content"
           hx-include="this"
           :hx-vals="JSON.stringify({search: search, sort: '{{ sort_col }}', dir: '{{ sort_dir }}'})"
           value="{{ search }}">
</div>

<!-- Table -->
<div class="overflow-x-auto border border-border-default rounded-lg">
    <table class="data-table">
        <thead>
            <tr>
                {% for col in columns %}
                <th>
                    <a href="?sort={{ col }}&dir={% if sort_col == col and sort_dir == 'asc' %}desc{% else %}asc{% endif %}&search={{ search }}"
                       hx-get="/tables/{{ table_name }}/rows?sort={{ col }}&dir={% if sort_col == col and sort_dir == 'asc' %}desc{% else %}asc{% endif %}&search={{ search }}"
                       hx-target="#table-content"
                       class="inline-flex items-center gap-1.5 hover:text-text-primary">
                        {{ col }}
                        {% if sort_col == col %}
                        <svg class="w-3 h-3 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            {% if sort_dir == 'asc' %}
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
                            {% else %}
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            {% endif %}
                        </svg>
                        {% endif %}
                    </a>
                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody id="table-content">
            {% include "partials/table_rows.html" %}
        </tbody>
    </table>
</div>
{% endblock %}
